<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8">
	<title>Colabora√ß√µes - RevitaSP</title>
	<link rel="stylesheet" href="./src/assets/css/global.css">
	<link rel="stylesheet" href="./src/assets/css/header.css">
	<link rel="stylesheet" href="./src/assets/css/projetos.css">
	<link rel="stylesheet" href="./src/assets/css/colabore.css">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
	<header class="header-container">
		<nav class="navbar">
			<ul class="nav-list">
				<li><a href="index.html#inicio" class="nav-item-link">In√≠cio</a></li>
				<li><a href="index.html#projeto" class="nav-item-link">O Projeto</a></li>
				<li><a href="index.html#projetos" class="nav-item-link">Pr√©dios Hist√≥ricos</a></li>
				<li><a href="index.html#retrofit" class="nav-item-link">Retrofit SP</a></li>
				<li><a href="index.html#sobre" class="nav-item-link">Sobre N√≥s</a></li>
				<li><a href="./colabore.html" class="nav-item-link">Colabore</a></li>
				<li><a href="./colaboracoes.html" class="nav-item-link">Colabora√ß√µes</a></li>
			</ul>
		</nav>
		<button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">üåô</button>
		<button class="theme-toggle-mobile" id="themeToggle" aria-label="Toggle dark mode">üåô</button>
		<button class="hamburger" id="hamburgerMenu" aria-label="Abrir menu">‚ò∞</button>
		<nav class="mobile-menu" id="mobileMenu">
			<ul class="nav-list">
				<li><a href="index.html#inicio" class="nav-item-link">In√≠cio</a></li>
				<li><a href="index.html#projeto" class="nav-item-link">O Projeto</a></li>
				<li><a href="index.html#projetos" class="nav-item-link">Pr√©dios Hist√≥ricos</a></li>
				<li><a href="index.html#retrofit" class="nav-item-link">Retrofit SP</a></li>
				<li><a href="index.html#sobre" class="nav-item-link">Sobre N√≥s</a></li>
				<li><a href="./colabore.html" class="nav-item-link">Colabore</a></li>
				<li><a href="./colaboracoes.html" class="nav-item-link">Colabora√ß√µes</a></li>
			</ul>
		</nav>
	</header>

	<section class="container" style="min-height: 70vh;">
		<div class="projeto-info">
			<div class="info-card" style="height: auto; padding: 40px;">
				<h1 style="margin-bottom: 15px;">Sugest√µes Recebidas</h1>
				<p style="font-size: 20px; margin-bottom: 30px;">Veja abaixo as contribui√ß√µes enviadas pela comunidade
					para a revitaliza√ß√£o do centro hist√≥rico de S√£o Paulo.</p>
				<div id="sugestoesContainer"></div>
			</div>
		</div>
	</section>

	<div style="display: flex; justify-content: center;">
		<hr style="margin-top: 50px; height: 0.5px; width: 80%;">
	</div>

	<footer>
		<div class="footer-info">
			<h1>RevitaSp</h1>
			<h2>S√£o Paulo, SP, Brasil</h2>
		</div>
	</footer>

	<script>
		const url = 'https://rfzdciezrbgkhpcfacet.supabase.co/rest/v1/colaboracoes';
		var apiKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJmemRjaWV6cmJna2hwY2ZhY2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxMTU0OTksImV4cCI6MjA2NTY5MTQ5OX0.dZwWjmraUNYYw7eYjKPuf3_9qmtpPi5_I1rWh2ld9-c';

		async function carregarSugestoes() {
			try {
				const resposta = await fetch(url, {
					method: 'GET',
					headers: {
						'apikey': apiKey,
						'Authorization': `Bearer ${apiKey}`,
						'Content-Type': 'application/json'
					}
				});

				if (!resposta.ok) {
					console.error('Erro ao buscar sugest√µes:', await resposta.text());
					return;
				}

				const sugestoes = await resposta.json();
				const container = document.getElementById('sugestoesContainer');
				container.innerHTML = '';

				if (sugestoes.length === 0) {
					container.innerHTML = '<p style="font-size:18px; color:var(--text-color);">Nenhuma sugest√£o recebida ainda.</p>';
					return;
				}

				sugestoes.reverse().forEach((item, index) => {
					const div = document.createElement('div');
					div.classList.add('projeto-item');
					div.style.background = 'var(--background-color)';
					div.style.color = 'var(--text-color)';
					div.style.border = 'none';

					div.innerHTML = `
						<div class="projeto-content" style="${index % 2 === 0 ? 'flex-direction: row-reverse' : ''}">
							<div class="projeto-texto">
								<p style="font-size: 22px; font-weight: bold; margin-bottom: 10px;"><b>Nome:</b> ${item.nome}</p>
								<p style="font-size: 18px; margin-bottom: 10px;"><b>Mensagem:</b> ${item.sugestao}</p>
							</div>
							${item.imagem_url ? `<div class="projeto-imagem"><img src="${item.imagem_url}" alt="Imagem da sugest√£o"></div>` : ''}
						</div>
					`;
					container.appendChild(div);
				});

			} catch (erro) {
				console.error('Erro na requisi√ß√£o:', erro);
			}
		}

		carregarSugestoes();
	</script>
	<script src="./src/assets/scripts/index.js"></script>
</body>

</html>